{
  "filename": "start.md",
  "__html": "<h1>快速开始</h1>\n<h2>一、微服务额外依赖TX-LCN Client 代码库</h2>\n<p>springcloud pom</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.codingapi.txlcn<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>tx-client-springcloud<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>5.0.0.RC1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<p>dubbo pom</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dependency</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">groupId</span>&gt;</span>com.codingapi.txlcn<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">groupId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">artifactId</span>&gt;</span>tx-client-dubbo<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">artifactId</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">version</span>&gt;</span>5.0.0.RC1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">version</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dependency</span>&gt;</span>\n</code></pre>\n<blockquote>\n<p><code>NOTE</code> 依微服务架构依赖其一</p>\n</blockquote>\n<h2>二、微服务示例代码</h2>\n<h3>（1）架构</h3>\n<p><img src=\"/img/quick_arch.png\" alt=\"arch\"></p>\n<h3>(2) 微服务A</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-comment\">// Micro Service A. As DTX starter</span>\n<span class=\"hljs-meta\">@Service</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ServiceA</span> </span>{\n    \n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> ValueDao valueDao;\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> ServiceB serviceB;\n    \n    <span class=\"hljs-meta\">@LcnTransaction</span>\n    <span class=\"hljs-meta\">@Transactional</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">execute</span><span class=\"hljs-params\">(String value)</span> <span class=\"hljs-keyword\">throws</span> BusinessException </span>{\n        <span class=\"hljs-comment\">// step1. call remote service B</span>\n        String result = serviceB.rpc(value);  <span class=\"hljs-comment\">// (1)</span>\n        <span class=\"hljs-comment\">// step2. local store operate. DTX commit if save success, rollback if not.</span>\n        valueDao.save(value);  <span class=\"hljs-comment\">// (2)</span>\n        valueDao.saveBackup(value);  <span class=\"hljs-comment\">// (3)</span>\n        <span class=\"hljs-keyword\">return</span> result + <span class=\"hljs-string\">\" &gt; \"</span> + <span class=\"hljs-string\">\"ok-A\"</span>;\n    }\n}\n</code></pre>\n<h3>(3) 微服务B</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-comment\">// Micro Service D</span>\n<span class=\"hljs-meta\">@Service</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ServiceB</span> </span>{\n    <span class=\"hljs-meta\">@Autowired</span>\n    <span class=\"hljs-keyword\">private</span> ValueDao valueDao;\n    \n    <span class=\"hljs-meta\">@LcnTransaction</span>\n    <span class=\"hljs-meta\">@Transactional</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">rpc</span><span class=\"hljs-params\">(String value)</span> <span class=\"hljs-keyword\">throws</span> BusinessException </span>{\n        valueDao.save(value);  <span class=\"hljs-comment\">// (4)</span>\n        valueDao.saveBackup(value);  <span class=\"hljs-comment\">// (5)</span>\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">\"ok-B\"</span>;\n    }\n}\n</code></pre>\n<p>(1) 服务A作为DTX发起方，远程调用服务B<br>\n(2)与(3) 构成A服务本地事务<br>\n(4)与(5) 构成B服务本地事务</p>\n<blockquote>\n<p><code>NOTES</code><br>\n1、@LcnTransaction\n标注事务单元用Lcn事务模式参与分布式事务<a href=\"principle/lcn.html\">[原理]</a>。还有\n<a href=\"principle/txc.html\">TXC</a>  <a href=\"principle/tcc.html\">TCC</a> 模式。<br>\n2、参数配置见 <a href=\"setting/client.html\">TxClient配置</a><br>\n3、详细配置见 <a href=\"demo/dubbo.html\">dubbo示例</a>  <a href=\"demo/springcloud.html\">springcloud示例</a></p>\n</blockquote>\n<h2>三、TxManager配置</h2>\n<p>配置TxManager参数并启动<br>\n参数配置见 <a href=\"setting/manager.html\">TxManager配置</a></p>\n<hr>\n<p>至此，你已经开发好了一个简单的、支持分布式事务(DTX)的微服务系统</p>\n",
  "link": "/zh-cn/docs/start.html",
  "meta": {}
}