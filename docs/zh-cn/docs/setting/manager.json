{
  "filename": "manager.md",
  "__html": "<h1>TxManager配置说明</h1>\n<h2>application.properties</h2>\n<pre><code class=\"language-properties\"><span class=\"hljs-comment\">\n# 事务消息主机</span>\n<span class=\"hljs-meta\">tx-lcn.manager.host</span>=<span class=\"hljs-string\">127.0.0.1</span>\n<span class=\"hljs-comment\">\n# 事务消息端口（默认是TxManager端口号加1）</span>\n<span class=\"hljs-meta\">tx-lcn.manager.port</span>=<span class=\"hljs-string\">8070</span>\n<span class=\"hljs-comment\">\n# 心跳检测时间(秒)</span>\n<span class=\"hljs-meta\">tx-lcn.manager.heart-time</span>=<span class=\"hljs-string\">15</span>\n<span class=\"hljs-comment\">\n# 事务并发等级（实质是处理事务消息的线程数, 最小为处理器核心数的5倍）</span>\n<span class=\"hljs-meta\">tx-lcn.manager.concurrent-level</span>=<span class=\"hljs-string\">0</span>\n<span class=\"hljs-comment\">\n# 后台管理密码</span>\n<span class=\"hljs-meta\">tx-lcn.manager.admin-key</span>=<span class=\"hljs-string\">codingapi</span>\n<span class=\"hljs-comment\">\n# 分布式事务执行总时间（ms）</span>\n<span class=\"hljs-meta\">tx-lcn.manager.dtx-time</span>=<span class=\"hljs-string\">36000</span>\n<span class=\"hljs-comment\">\n# 与TxClient通讯最大等待时间（秒）</span>\n<span class=\"hljs-meta\">tx-lcn.message.netty.wait-time</span>=<span class=\"hljs-string\">5</span>\n<span class=\"hljs-comment\">\n# 事务异常通知（任何http协议地址。未指定协议时，为TxManager提供的接口）</span>\n<span class=\"hljs-meta\">tx-lcn.manager.ex-url</span>=<span class=\"hljs-string\">/provider/email-to/ujued@qq.com</span>\n</code></pre>\n<hr>\n<p><code>注意（NOTE）</code></p>\n<p>(1) TxManager所有配置均有默认配置，请按需覆盖默认配置。</p>\n<p>(2) <em>特别注意</em> TxManager进程会监听两个端口号，一个为<code>TxManager端口</code>，另一个是<code>事务消息端口</code>。TxClient默认连接<code>事务消息端口</code>是<code>8070</code>，\n所以，为保证TX-LCN基于默认配置运行良好，请设置<code>TxManager端口</code>号为<code>8069</code> 或者指定<code>事务消息端口</code>为<code>8070</code></p>\n<p>(3) <code>分布式事务执行总时间 a</code> 与 <code>TxClient通讯最大等待时间 b</code>、<code>TxManager通讯最大等待时间 c</code>、<code>微服务间通讯时间 d</code>、<code>微服务调用链长度 e</code> 几个时间存在着依赖关系。\n<code>a &gt;= 2c + (b + c + d) * (e - 1)</code>, 特别地，b、c、d 一致时，<code>a &gt;= (3e-1)b</code>。你也可以在此理论上适当在减小a的值，发生异常时能更快得到自动补偿，即 <code>a &gt;= (3e-1)b - Δ</code>（<a href=\"../fqa.html\">原因</a>）。\n最后，调用链小于等于3时，将基于默认配置运行良好</p>\n<p>(4) 若用<code>tx-lcn.manager.ex-url=/provider/email-to/xxx@xx.xxx</code> 这个配置，配置管理员邮箱信息(如QQ邮箱)：</p>\n<pre><code class=\"language-properties\"><span class=\"hljs-meta\">spring.mail.host</span>=<span class=\"hljs-string\">smtp.qq.com</span>\n<span class=\"hljs-meta\">spring.mail.port</span>=<span class=\"hljs-string\">587</span>\n<span class=\"hljs-meta\">spring.mail.username</span>=<span class=\"hljs-string\">xxxxx@qq.com</span>\n<span class=\"hljs-meta\">spring.mail.password</span>=<span class=\"hljs-string\">nnvmtplwypuybiof</span>\n</code></pre>\n<hr>\n",
  "link": "/zh-cn/docs/setting/manager.html",
  "meta": {}
}